<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to SEQuential • SEQuential</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to SEQuential">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SEQuential</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/SEQuential.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/censoring.html">Per-Protocol: Censoring Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/doseresponse.html">Per-Protocol: Dose-Response Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/ITT.html">Intention-To-Treat Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/seqopts.html">Defining your SEQopts()</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Introduction to SEQuential</h1>
            
      

      <div class="d-none name"><code>SEQuential.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="setting-up-your-analysis">Setting up your Analysis<a class="anchor" aria-label="anchor" href="#setting-up-your-analysis"></a>
</h2>
<p>The flow of the SEQuential R package never changes, nor are there
planned changes to this flow in the future.</p>
<div class="section level3">
<h3 id="step-1---defining-your-options">Step 1 - Defining your options<a class="anchor" aria-label="anchor" href="#step-1---defining-your-options"></a>
</h3>
<p>In your R script, you will always start by defining your options
object, through the <code>SEQopts</code> helper. There are many defaults
which allow you to target exactly how you would like to change your
analysis. Through this wiki there are specific pages dedicated to each
causal contrast and the parameters which affect them, but for simplicity
let’s start with an intention-to-treat analysis with 20 bootstrap
samples.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://causalinference.github.io/SEQuential/">SEQuential</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">options</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/SEQopts.html">SEQopts</a></span><span class="op">(</span>km.curves <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co">#asks the function to return survival and risk estimates</span></span>
<span>                   bootstrap <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co">#asks the model to preform bootstrapping</span></span>
<span>                   bootstrap.nboot <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="co">#asks the model for 10 bootstrap samples</span></span></code></pre></div>
<p>In general, options will be in the form
<code>{option}.{parameter}</code> - here you may notice that we use
<code>bootstrap.nboot</code> indicating that this parameter affects the
<code>bootstrap</code></p>
</div>
<div class="section level3">
<h3 id="step-2---running-the-primary-function">Step 2 - Running the Primary Function<a class="anchor" aria-label="anchor" href="#step-2---running-the-primary-function"></a>
</h3>
<p>The next step is running the primary R function,
<code>SEQuential</code>. Here you will give your options, data, and
data-level information. We provide some small simulated datasets to test
on.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">SEQdata</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/SEQuential.html">SEQuential</a></span><span class="op">(</span><span class="va">data</span>, id.col <span class="op">=</span> <span class="st">"ID"</span>, </span>
<span>                          time.col <span class="op">=</span> <span class="st">"time"</span>, </span>
<span>                          eligible.col <span class="op">=</span> <span class="st">"eligible"</span>,</span>
<span>                          treatment.col <span class="op">=</span> <span class="st">"tx_init"</span>,</span>
<span>                          outcome.col <span class="op">=</span> <span class="st">"outcome"</span>,</span>
<span>                          time_varying.cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"N"</span>, <span class="st">"L"</span>, <span class="st">"P"</span><span class="op">)</span>,</span>
<span>                          fixed.cols <span class="op">=</span> <span class="st">"sex"</span>,</span>
<span>                          method <span class="op">=</span> <span class="st">"ITT"</span>, options <span class="op">=</span> <span class="va">options</span><span class="op">)</span></span>
<span><span class="co">#&gt; Expanding Data...</span></span>
<span><span class="co">#&gt; Expansion Successful</span></span>
<span><span class="co">#&gt; Moving forward with ITT analysis</span></span>
<span><span class="co">#&gt; Bootstrapping with 80 % of data 10 times</span></span>
<span><span class="co">#&gt; ITT model created successfully</span></span>
<span><span class="co">#&gt; Creating Survival curves</span></span>
<span><span class="co">#&gt; Scale for <span style="color: #00BB00;">colour</span> is already present.</span></span>
<span><span class="co">#&gt; Adding another scale for <span style="color: #00BB00;">colour</span>, which will replace the existing scale.</span></span>
<span><span class="co">#&gt; Completed</span></span></code></pre></div>
<p><code>SEQuential</code> is a rather chunky algorithm and will take
some time to run, especially when bootstrapping. We provide some print
statements to help track where the function is processing at any given
point in time.</p>
</div>
<div class="section level3">
<h3 id="step-3---recovering-your-results">Step 3 - Recovering your results<a class="anchor" aria-label="anchor" href="#step-3---recovering-your-results"></a>
</h3>
<p><code>SEQuential</code> produces a lot of internal diagnostics,
models, and dataframes out of its main function in an S4 class. We
provide a few different methods to handle obtaining your results.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/outcome.html">outcome</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span>     <span class="co"># Returns a list of only the outcome models </span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [[1]][[1]]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; fastglm.default(x = X, y = y, family = quasibinomial(), method = params@fastglm.method)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;           (Intercept)          tx_init_bas1              followup </span></span>
<span><span class="co">#&gt;           -6.85931555            0.22530938            0.03538172 </span></span>
<span><span class="co">#&gt;           followup_sq                 trial              trial_sq </span></span>
<span><span class="co">#&gt;           -0.00015987            0.04471790            0.00057617 </span></span>
<span><span class="co">#&gt;                  sex1                 N_bas                 L_bas </span></span>
<span><span class="co">#&gt;            0.12704583            0.00328671           -0.01385088 </span></span>
<span><span class="co">#&gt;                 P_bas tx_init_bas1:followup </span></span>
<span><span class="co">#&gt;            0.20092890           -0.00170402 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[2]]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; fastglm.default(x = X, y = y, family = quasibinomial(), method = params@fastglm.method)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;           (Intercept)          tx_init_bas1              followup </span></span>
<span><span class="co">#&gt;           -8.14674023            0.19226280            0.03965018 </span></span>
<span><span class="co">#&gt;           followup_sq                 trial              trial_sq </span></span>
<span><span class="co">#&gt;           -0.00016679            0.07494722            0.00042395 </span></span>
<span><span class="co">#&gt;                  sex1                 N_bas                 L_bas </span></span>
<span><span class="co">#&gt;           -0.01185998            0.00256276           -0.06020273 </span></span>
<span><span class="co">#&gt;                 P_bas tx_init_bas1:followup </span></span>
<span><span class="co">#&gt;            0.34583760           -0.00201959 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[3]]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; fastglm.default(x = X, y = y, family = quasibinomial(), method = params@fastglm.method)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;           (Intercept)          tx_init_bas1              followup </span></span>
<span><span class="co">#&gt;           -9.68266422            0.25196123            0.02832709 </span></span>
<span><span class="co">#&gt;           followup_sq                 trial              trial_sq </span></span>
<span><span class="co">#&gt;           -0.00021262            0.09954536            0.00021236 </span></span>
<span><span class="co">#&gt;                  sex1                 N_bas                 L_bas </span></span>
<span><span class="co">#&gt;           -0.00614833            0.00098217           -0.09436828 </span></span>
<span><span class="co">#&gt;                 P_bas tx_init_bas1:followup </span></span>
<span><span class="co">#&gt;            0.53220518            0.00100584 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[4]]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; fastglm.default(x = X, y = y, family = quasibinomial(), method = params@fastglm.method)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;           (Intercept)          tx_init_bas1              followup </span></span>
<span><span class="co">#&gt;           -1.4505e+01            4.0995e-02            4.0091e-02 </span></span>
<span><span class="co">#&gt;           followup_sq                 trial              trial_sq </span></span>
<span><span class="co">#&gt;           -8.2607e-05            1.9664e-01           -3.1030e-04 </span></span>
<span><span class="co">#&gt;                  sex1                 N_bas                 L_bas </span></span>
<span><span class="co">#&gt;           -1.0100e-01            3.3429e-04           -7.3433e-02 </span></span>
<span><span class="co">#&gt;                 P_bas tx_init_bas1:followup </span></span>
<span><span class="co">#&gt;            9.9999e-01            5.6661e-03 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[5]]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; fastglm.default(x = X, y = y, family = quasibinomial(), method = params@fastglm.method)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;           (Intercept)          tx_init_bas1              followup </span></span>
<span><span class="co">#&gt;           -8.83548174            0.02688514            0.02850910 </span></span>
<span><span class="co">#&gt;           followup_sq                 trial              trial_sq </span></span>
<span><span class="co">#&gt;           -0.00024471            0.09504621           -0.00014984 </span></span>
<span><span class="co">#&gt;                  sex1                 N_bas                 L_bas </span></span>
<span><span class="co">#&gt;            0.13627464            0.00151311            0.02626678 </span></span>
<span><span class="co">#&gt;                 P_bas tx_init_bas1:followup </span></span>
<span><span class="co">#&gt;            0.43655780           -0.00174669 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[6]]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; fastglm.default(x = X, y = y, family = quasibinomial(), method = params@fastglm.method)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;           (Intercept)          tx_init_bas1              followup </span></span>
<span><span class="co">#&gt;           -4.08687505            0.30694465            0.03700131 </span></span>
<span><span class="co">#&gt;           followup_sq                 trial              trial_sq </span></span>
<span><span class="co">#&gt;           -0.00032609           -0.00657565            0.00089323 </span></span>
<span><span class="co">#&gt;                  sex1                 N_bas                 L_bas </span></span>
<span><span class="co">#&gt;            0.12870566            0.00402671           -0.11084174 </span></span>
<span><span class="co">#&gt;                 P_bas tx_init_bas1:followup </span></span>
<span><span class="co">#&gt;           -0.08513444           -0.00435722 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[7]]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; fastglm.default(x = X, y = y, family = quasibinomial(), method = params@fastglm.method)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;           (Intercept)          tx_init_bas1              followup </span></span>
<span><span class="co">#&gt;           -8.64511609            0.10589836            0.01912696 </span></span>
<span><span class="co">#&gt;           followup_sq                 trial              trial_sq </span></span>
<span><span class="co">#&gt;           -0.00022359            0.07344020            0.00029895 </span></span>
<span><span class="co">#&gt;                  sex1                 N_bas                 L_bas </span></span>
<span><span class="co">#&gt;            0.20712094            0.00545825            0.03800885 </span></span>
<span><span class="co">#&gt;                 P_bas tx_init_bas1:followup </span></span>
<span><span class="co">#&gt;            0.42633397            0.00643044 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[8]]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; fastglm.default(x = X, y = y, family = quasibinomial(), method = params@fastglm.method)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;           (Intercept)          tx_init_bas1              followup </span></span>
<span><span class="co">#&gt;           -8.96315219            0.46116363            0.04809236 </span></span>
<span><span class="co">#&gt;           followup_sq                 trial              trial_sq </span></span>
<span><span class="co">#&gt;           -0.00030492            0.07407228            0.00045074 </span></span>
<span><span class="co">#&gt;                  sex1                 N_bas                 L_bas </span></span>
<span><span class="co">#&gt;            0.17904994            0.00582946            0.00133611 </span></span>
<span><span class="co">#&gt;                 P_bas tx_init_bas1:followup </span></span>
<span><span class="co">#&gt;            0.37584210           -0.00692379 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[9]]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; fastglm.default(x = X, y = y, family = quasibinomial(), method = params@fastglm.method)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;           (Intercept)          tx_init_bas1              followup </span></span>
<span><span class="co">#&gt;           -4.68527791            0.39349369            0.03510229 </span></span>
<span><span class="co">#&gt;           followup_sq                 trial              trial_sq </span></span>
<span><span class="co">#&gt;           -0.00035165           -0.00759481            0.00084357 </span></span>
<span><span class="co">#&gt;                  sex1                 N_bas                 L_bas </span></span>
<span><span class="co">#&gt;           -0.00075082            0.00650330            0.05898252 </span></span>
<span><span class="co">#&gt;                 P_bas tx_init_bas1:followup </span></span>
<span><span class="co">#&gt;           -0.00609746           -0.00613544 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[10]]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; fastglm.default(x = X, y = y, family = quasibinomial(), method = params@fastglm.method)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;           (Intercept)          tx_init_bas1              followup </span></span>
<span><span class="co">#&gt;            1.7540e+00            1.1570e-01            1.9745e-02 </span></span>
<span><span class="co">#&gt;           followup_sq                 trial              trial_sq </span></span>
<span><span class="co">#&gt;            3.9629e-05           -1.1164e-01            1.6734e-03 </span></span>
<span><span class="co">#&gt;                  sex1                 N_bas                 L_bas </span></span>
<span><span class="co">#&gt;           -9.1659e-02            1.7729e-03           -1.7534e-01 </span></span>
<span><span class="co">#&gt;                 P_bas tx_init_bas1:followup </span></span>
<span><span class="co">#&gt;           -6.6998e-01            2.4396e-03 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[11]]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; fastglm.default(x = X, y = y, family = quasibinomial(), method = params@fastglm.method)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;           (Intercept)          tx_init_bas1              followup </span></span>
<span><span class="co">#&gt;           -1.2850e+01            3.2399e-01            3.8747e-02 </span></span>
<span><span class="co">#&gt;           followup_sq                 trial              trial_sq </span></span>
<span><span class="co">#&gt;           -2.7788e-04            1.6451e-01           -4.5264e-04 </span></span>
<span><span class="co">#&gt;                  sex1                 N_bas                 L_bas </span></span>
<span><span class="co">#&gt;           -1.1366e-02           -3.0130e-03            2.2202e-02 </span></span>
<span><span class="co">#&gt;                 P_bas tx_init_bas1:followup </span></span>
<span><span class="co">#&gt;            8.6620e-01           -6.8907e-03</span></span>
<span><span class="fu"><a href="../reference/km.curve.html">km.curve</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span>    <span class="co"># Prints the survival curve</span></span>
<span><span class="co">#&gt; Scale for <span style="color: #00BB00;">colour</span> is already present.</span></span>
<span><span class="co">#&gt; Adding another scale for <span style="color: #00BB00;">colour</span>, which will replace the existing scale.</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; Warning: Removed 600 rows containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_line()`).</span></span></code></pre></div>
<p><img src="SEQuential_files/figure-html/outcome-1.png" width="700"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ryan O’Dea, Alejandro Szmulewicz, Miguel Hernan.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
